;;-*-Lisp-*-
(in-package goal)

;; name: ctywide-bbush.gc
;; name in dgo: ctywide-bbush
;; dgos: LBBUSH

(declare-type city-race-ring-info structure)

;; DECOMP BEGINS

(defpartgroup group-rolling-ring
  :id 1053
  :linger-duration (seconds 0)
  :bounds (static-bspherem 0 0 0 8)
  :parts ((sp-item 4578 :fade-after (meters 100) :falloff-to (meters 100))
          (sp-item 4579 :fade-after (meters 80))
          (sp-item 4580 :flags (is-3d))
          (sp-item 4581 :flags (is-3d))))
    
  

(defpart 4578
  :init-specs ((:texture (new 'static 'texture-id :index #x29 :page #xc))
               (:num 2.0 2.0)
               (:scale-x (meters 1) (meters 1))
               (:rot-z (degrees 0) (degrees 360))
               (:scale-y :copy scale-x)
               (:r 64.0 1 64.0)
               (:g 0.0)
               (:b 64.0 1 64.0)
               (:a 64.0)
               (:rotvel-z (degrees -0.2) (degrees 0.4))
               (:fade-a -1.4222221)
               (:timer (seconds 0.14))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
               (:conerot-x (degrees 0) (degrees 360))
               (:rotate-y (degrees 0))
               (:conerot-radius (meters 4.5))))
    
  

(defpart 4579
  :init-specs ((:texture (new 'static 'texture-id :index #x29 :page #xc))
               (:num 1.0)
               (:scale-x (meters 1) (meters 4))
               (:rot-z (degrees 0) (degrees 360))
               (:scale-y :copy scale-x)
               (:r 64.0 1 64.0)
               (:g 0.0)
               (:b 64.0 1 64.0)
               (:a 64.0)
               (:rotvel-z (degrees -0.2) (degrees 0.4))
               (:fade-a -1.4222221)
               (:timer (seconds 0.14))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
               (:conerot-x (degrees 0) (degrees 360))
               (:rotate-y (degrees 0))
               (:conerot-radius (meters 4.5))))
    
  

(defpart 4580
  :init-specs ((:texture (new 'static 'texture-id :index #x2c :page #xc))
               (:num 1.0)
               (:scale-x (meters 10))
               (:rot-x (degrees 0) (degrees 360))
               (:rot-y (degrees -1) (degrees 2))
               (:rot-z (degrees 90))
               (:scale-y :copy scale-x)
               (:r 128.0 1 127.0)
               (:g 0.0)
               (:b 128.0 1 127.0)
               (:a 96.0 32.0)
               (:fade-a -8.533334)
               (:timer (seconds 0.035))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))))
    
  

(defpart 4581
  :init-specs ((:texture (new 'static 'texture-id :index #x26 :page #xc))
               (:num 1.0)
               (:scale-x (meters 12))
               (:rot-x (degrees 0) (degrees 360))
               (:rot-y (degrees 0))
               (:rot-z (degrees 90))
               (:scale-y :copy scale-x)
               (:r 128.0 1 127.0)
               (:g 0.0)
               (:b 128.0 1 127.0)
               (:a 32.0 32.0)
               (:timer (seconds 0.017))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))))
    
  

(defpartgroup group-rolling-spawn-ring
  :id 1054
  :duration (seconds 0.017)
  :linger-duration (seconds 0.47)
  :bounds (static-bspherem 0 0 0 8)
  :parts ((sp-item 4582 :fade-after (meters 100) :falloff-to (meters 100))
          (sp-item 4583 :flags (is-3d))
          (sp-item 4584 :flags (is-3d))))
    
  

(defpart 4582
  :init-specs ((:texture (new 'static 'texture-id :index #x29 :page #xc))
               (:num 32.0)
               (:scale-x (meters 1) (meters 3))
               (:rot-z (degrees 0) (degrees 360))
               (:scale-y :copy scale-x)
               (:r 64.0 1 64.0)
               (:g 0.0)
               (:b 64.0 1 64.0)
               (:a 0.0 63 1.0)
               (:vel-y (meters 0.03))
               (:rotvel-z (degrees -0.2) (degrees 0.4))
               (:timer (seconds 0.5))
               (:flags (sp-cpuinfo-flag-3))
               (:next-time (seconds 0.067) (seconds 0.065))
               (:next-launcher 4585)
               (:conerot-x (degrees 0) (degrees 360))
               (:rotate-y (degrees 0))
               (:conerot-radius (meters 0))))
    
  

(defpart 4585
  :init-specs ((:r 64.0 1 64.0)
               (:g 0.0)
               (:b 64.0 1 64.0)
               (:a 0.0 63 1.0)
               (:next-time (seconds 0.067) (seconds 0.065))
               (:next-launcher 4585)))
    
  

(defpart 4583
  :init-specs ((:texture (new 'static 'texture-id :index #x2c :page #xc))
               (:num 1.0)
               (:scale-x (meters 0))
               (:rot-x (degrees 0) (degrees 360))
               (:rot-y (degrees -1) (degrees 2))
               (:rot-z (degrees 90))
               (:scale-y :copy scale-x)
               (:r 128.0 1 127.0)
               (:g 0.0)
               (:b 128.0 1 127.0)
               (:a 96.0 32.0)
               (:scalevel-x (meters 0.06666667))
               (:scalevel-y :copy scalevel-x)
               (:timer (seconds 0.5))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 left-multiply-quat))
               (:next-time (seconds 0.017))
               (:next-launcher 4586)))
    
  

(defpart 4586
  :init-specs ((:r 128.0 1 127.0)
               (:g 0.0)
               (:b 128.0 1 127.0)
               (:a 32.0 32.0)
               (:next-time (seconds 0.017))
               (:next-launcher 4586)))
    
  

(defpart 4584
  :init-specs ((:texture (new 'static 'texture-id :index #x26 :page #xc))
               (:num 1.0)
               (:scale-x (meters 0))
               (:rot-x (degrees 0) (degrees 360))
               (:rot-y (degrees 0))
               (:rot-z (degrees 90))
               (:scale-y :copy scale-x)
               (:r 128.0 1 127.0)
               (:g 0.0)
               (:b 128.0 1 127.0)
               (:a 32.0 32.0)
               (:scalevel-x (meters 0.08))
               (:scalevel-y :copy scalevel-x)
               (:timer (seconds 0.5))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 left-multiply-quat))
               (:next-time (seconds 0.017))
               (:next-launcher 4587)))
    
  

(defpart 4587
  :init-specs ((:r 128.0 1 127.0)
               (:g 0.0)
               (:b 128.0 1 127.0)
               (:a 32.0 32.0)
               (:next-time (seconds 0.017))
               (:next-launcher 4587)))
    
  

(defpartgroup group-rolling-explode-ring
  :id 1055
  :duration (seconds 0.017)
  :linger-duration (seconds 0.5)
  :bounds (static-bspherem 0 0 0 8)
  :parts ((sp-item 4588 :fade-after (meters 100) :falloff-to (meters 100)) (sp-item 4589 :flags (is-3d))))
  

(defpart 4588
  :init-specs ((:texture (new 'static 'texture-id :index #x29 :page #xc))
               (:num 64.0)
               (:scale-x (meters 1) (meters 1))
               (:rot-z (degrees 0) (degrees 360))
               (:scale-y :copy scale-x)
               (:r 64.0 1 64.0)
               (:g 0.0)
               (:b 64.0 1 64.0)
               (:a 32.0 96.0)
               (:vel-y (meters 0.1) (meters 0.033333335))
               (:rotvel-z (degrees -0.2) (degrees 0.4))
               (:fade-a -0.85333335)
               (:friction 0.9)
               (:timer (seconds 0.5))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
               (:conerot-x (degrees 0) (degrees 360))
               (:rotate-y (degrees 0))
               (:conerot-radius (meters 4.5))))
    
  

(defpart 4589
  :init-specs ((:texture (new 'static 'texture-id :index #x2c :page #xc))
               (:num 2.0)
               (:scale-x (meters 10))
               (:rot-x (degrees 0) (degrees 360))
               (:rot-y (degrees -1) (degrees 2))
               (:rot-z (degrees 90))
               (:scale-y :copy scale-x)
               (:r 128.0 1 127.0)
               (:g 0.0)
               (:b 128.0 1 127.0)
               (:a 128.0)
               (:scalevel-x (meters 0.06666667))
               (:scalevel-y :copy scalevel-x)
               (:fade-a -0.85333335)
               (:timer (seconds 0.5))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))))
    
  

(deftype race-ring (process-drawable)
  ((last-target-pos        vector         :inline)
   (keep-part-track-alive  symbol)
   (part-track             handle)
   (rot-y                  float)
   (cyl                    cylinder-flat  :inline)
   )
  (:state-methods
    idle
    die
    )
  (:methods
    (race-ring-method-22 (_type_) none)
    (race-ring-method-23 (_type_) none)
    )
  )


(defun race-ring-set-particle-rotation-callback ((arg0 part-tracker))
  (let ((f0-0 (-> (the-as (pointer race-ring) (-> arg0 userdata)) 0 rot-y)))
    (set! (-> *part-id-table* 4578 init-specs 14 initial-valuef) f0-0)
    (set! (-> *part-id-table* 4579 init-specs 14 initial-valuef) f0-0)
    (set! (-> *part-id-table* 4580 init-specs 4 initial-valuef) (+ -182.04445 f0-0))
    (set! (-> *part-id-table* 4581 init-specs 4 initial-valuef) f0-0)
    (set! (-> *part-id-table* 4582 init-specs 16 initial-valuef) f0-0)
    (set! (-> *part-id-table* 4583 init-specs 4 initial-valuef) f0-0)
    (set! (-> *part-id-table* 4584 init-specs 4 initial-valuef) f0-0)
    (set! (-> *part-id-table* 4588 init-specs 16 initial-valuef) f0-0)
    (set! (-> *part-id-table* 4589 init-specs 4 initial-valuef) f0-0))
    
  0
  (none))
  

(defstate idle (race-ring)
  :virtual #t
  :enter (behavior ()
    (let ((gp-0 (get-process *default-dead-pool* part-tracker #x4000)))
      (set! (-> self part-track)
            (ppointer->handle
              (when gp-0
                (let ((t9-1 (method-of-type part-tracker activate)))
                  (t9-1 (the-as part-tracker gp-0) self (symbol->string (-> part-tracker symbol)) (the-as pointer #x70004000))
                  )
                (let ((t9-2 run-function-in-process)
                      (a0-2 gp-0)
                      (a1-2 part-tracker-init)
                      (a2-4 (-> *part-group-id-table* 1054))
                      (a3-1 0)
                      (t0-0 race-ring-set-particle-rotation-callback)
                      (t1-0 (-> self ppointer))
                      (t2-0 #f)
                      (t3-0 *launch-matrix*)
                      )
                  (set! (-> t3-0 trans quad) (-> self root trans quad))
                  ((the-as (function object object object object object object object object none) t9-2)
                   a0-2
                   a1-2
                   a2-4
                   a3-1
                   t0-0
                   t1-0
                   t2-0
                   t3-0
                   )
                  )
                (-> gp-0 ppointer)
                )
              )
            )
      )
    )
  :exit (behavior ()
    (let ((a0-1 (handle->process (-> self part-track))))
      (if a0-1
          (deactivate a0-1)
          )
      )
    (let ((gp-0 (get-process *default-dead-pool* part-tracker #x4000)))
      (set! (-> self part-track)
            (ppointer->handle
              (when gp-0
                (let ((t9-2 (method-of-type part-tracker activate)))
                  (t9-2 (the-as part-tracker gp-0) self (symbol->string (-> part-tracker symbol)) (the-as pointer #x70004000))
                  )
                (let ((t9-3 run-function-in-process)
                      (a0-6 gp-0)
                      (a1-3 part-tracker-init)
                      (a2-4 (-> *part-group-id-table* 1055))
                      (a3-1 0)
                      (t0-0 race-ring-set-particle-rotation-callback)
                      (t1-0 (-> self ppointer))
                      (t2-0 #f)
                      (t3-0 *launch-matrix*)
                      )
                  (set! (-> t3-0 trans quad) (-> self root trans quad))
                  ((the-as (function object object object object object object object object none) t9-3)
                   a0-6
                   a1-3
                   a2-4
                   a3-1
                   t0-0
                   t1-0
                   t2-0
                   t3-0
                   )
                  )
                (-> gp-0 ppointer)
                )
              )
            )
      )
    )
  :trans (behavior ()
    (cond
      ((handle->process (-> self part-track))
       (if (-> self keep-part-track-alive)
           (set-time! (-> (the-as part-tracker (-> self part-track process 0)) start-time))
           )
       )
      (else
        (let ((gp-0 (get-process *default-dead-pool* part-tracker #x4000)))
          (set! (-> self part-track)
                (ppointer->handle
                  (when gp-0
                    (let ((t9-1 (method-of-type part-tracker activate)))
                      (t9-1 (the-as part-tracker gp-0) self (symbol->string (-> part-tracker symbol)) (the-as pointer #x70004000))
                      )
                    (let ((t9-2 run-function-in-process)
                          (a0-9 gp-0)
                          (a1-3 part-tracker-init)
                          (a2-4 (-> *part-group-id-table* 1053))
                          (a3-1 0)
                          (t0-0 race-ring-set-particle-rotation-callback)
                          (t1-0 (-> self ppointer))
                          (t2-0 #f)
                          (t3-0 *launch-matrix*)
                          )
                      (set! (-> t3-0 trans quad) (-> self root trans quad))
                      ((the-as (function object object object object object object object object none) t9-2)
                       a0-9
                       a1-3
                       a2-4
                       a3-1
                       t0-0
                       t1-0
                       t2-0
                       t3-0
                       )
                      )
                    (-> gp-0 ppointer)
                    )
                  )
                )
          )
        (set! (-> self keep-part-track-alive) #t)
        )
      )
    (let ((v1-17 *target*)
          (gp-1 (new 'stack-no-clear 'vector))
          )
      (when v1-17
        (set! (-> gp-1 quad) (-> v1-17 control trans quad))
        (set! (-> gp-1 w) 4096.0)
        (when (focus-test? v1-17 pilot)
          (let ((a1-8 (handle->process (-> v1-17 pilot vehicle))))
            (set! (-> gp-1 quad) (-> (the-as process-focusable a1-8) root root-prim prim-core world-sphere quad))
            )
          )
        (when (>= (ray-flat-cyl-intersect
                    (-> self cyl)
                    (-> self last-target-pos)
                    (vector-! (new 'stack-no-clear 'vector) gp-1 (-> self last-target-pos))
                    )
                  0.0
                  )
          (+! (-> *game-info* counter) -1.0)
          (sound-play "ring-pickup")
          (go-virtual die)
          )
        (set! (-> self last-target-pos quad) (-> gp-1 quad))
        )
      )
    )
  :code (behavior ()
    (until #f
      (suspend)
      )
    #f
    )
  :post ja-post
  )

(defstate die (race-ring)
  :virtual #t
  :code (behavior ()
    (while (-> self child)
      (suspend)
      )
    (cleanup-for-death self)
    )
  )

(defmethod race-ring-method-22 ((this race-ring))
  (set! (-> this root) (new 'process 'trsqv))
  0
  (none))
  

(defmethod race-ring-method-23 ((this race-ring))
  (add-icon! *minimap* this (the-as uint 15) (the-as int #f) (the-as vector #t) 0)
  (set! (-> this keep-part-track-alive) #f)
  (set! (-> this part-track) (the-as handle #f))
  (set! (-> this rot-y) (+ 16384.0 (quaternion-y-angle (-> this root quat))))
  (set! (-> this last-target-pos quad) (-> (target-pos 0) quad))
  (set-vector! (-> this cyl axis) (cos (-> this rot-y)) 0.0 (- (sin (-> this rot-y))) 1.0)
  (vector+float*! (the-as vector (-> this cyl)) (-> this root trans) (-> this cyl axis) -2048.0)
  (set! (-> this cyl radius) 24576.0)
  (set! (-> this cyl length) 4096.0)
  0
  (none))
  

;; WARN: Return type mismatch object vs none.
(defbehavior race-ring-init-by-other race-ring ((arg0 city-race-ring-info))
  (race-ring-method-22 self)
  (set! (-> self root trans quad) (-> arg0 pos quad))
  (+! (-> self root trans y) 10240.0)
  (quaternion-axis-angle! (-> self root quat) 0.0 1.0 0.0 (-> arg0 pos w))
  (set-vector! (-> self root scale) 3.0 3.0 3.0 1.0)
  (race-ring-method-23 self)
  (go-virtual idle)
  (none))
  

(defun race-ring-spawn ((arg0 task-manager) (arg1 city-race-ring-info))
  (let ((gp-0 (the-as process #f)))
    (let ((v1-1 (process-spawn race-ring arg1 :to arg0)))
      (if v1-1
          (set! gp-0 (-> v1-1 0))))
          
      
    gp-0))
    
  

(deftype bb-ring-info (structure)
  ((time       time-frame)
   (start-pos  vector  :inline)
   (rotation   float)
   (rings      (array city-race-ring-info))
   )
  )


(define *bb-ring-info* (new 'static 'boxed-array :type bb-ring-info
                         ;; ctyslumb / burning-bush-1 / city-burning-bush-ring-3
                         (new 'static 'bb-ring-info
                           :time (seconds 11.25)
                           :start-pos (new 'static 'vector :x (meters 736.10)  :y (meters  24.70)  :z (meters -274.62)   :w 1.0)
                           :rings (new 'static 'boxed-array :type city-race-ring-info
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 766.04)  :y (meters  27.07)  :z (meters -182.42)   :w 1226.6175)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 691.68)  :y (meters  14.06)  :z (meters -118.97)   :w -1451.0982)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 827.60)  :y (meters  31.11)  :z (meters  55.86)   :w 6852.4609)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info  ;; by neon sign
                                     :pos (new 'static 'vector :x (meters 996.96)  :y (meters  23.85)  :z (meters 169.19)    :w 9462.2841)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info  ;; in northern trench by hideout
                                     :pos (new 'static 'vector :x (meters 1074.19)  :y (meters   1.31)  :z (meters  78.47)    :w -13772.8076)
                                    ;;  :pos (new 'static 'vector :x (meters 943.52)  :y (meters   2.16)  :z (meters 346.16)    :w 16075.2041)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info  ;; to east of middle trench
                                     :pos (new 'static 'vector :x (meters 1159.87)  :y (meters  10.49)  :z (meters 200.48)   :w -29876.1445)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info ;; pipes near ctyindb
                                     :pos (new 'static 'vector :x (meters 1107.20)  :y (meters  19.00)  :z (meters 356.05)    :w -976.8892)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1153.17)  :y (meters  11.45)  :z (meters 468.04)   :w -246.9142)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1044.26)  :y (meters  26.67)  :z (meters 418.03)   :w -20887.5976)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1029.07)  :y (meters  26.52)  :z (meters 514.05)   :w 8166.2543)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1132.04)  :y (meters  28.15)  :z (meters 623.12)   :w 660.7589)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info ;; pipes near ctyindb bbush
                                     :pos (new 'static 'vector :x (meters 1061.94)  :y (meters  13.64)  :z (meters 667.54)  :w -29122.3613)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info ;; overpass ramp
                                     :pos (new 'static 'vector :x (meters 788.25)  :y (meters  10.71)  :z (meters 667.19)    :w -5705.1386)
                                     :boost 1.0
                                     :dist 819200.0)

                                   (new 'static 'city-race-ring-info ;; on overpass loop
                                     :pos (new 'static 'vector :x (meters 936.17)  :y (meters  27.10)  :z (meters 637.14)   :w 8167.6054)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info ;; drop off overpass loop near ctyinda bbush
                                     :pos (new 'static 'vector :x (meters 922.47)  :y (meters  26.41)  :z (meters 851.39)   :w 10165.9882)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1041.31)  :y (meters  10.84)  :z (meters 960.23)   :w 2167.6699)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1128.02)  :y (meters  12.27)  :z (meters 1084.67)   :w -15366.7285)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1036.04)  :y (meters   9.96)  :z (meters 1154.38)   :w -15342.0556)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 907.54)  :y (meters  12.90)  :z (meters 994.26)   :w -23745.4062)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 818.90)  :y (meters  18.35)  :z (meters 1076.04)   :w 16563.1054)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 847.41)  :y (meters  27.47)  :z (meters 1014.80)   :w -23520.2792)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 962.00)  :y (meters  27.94)  :z (meters 872.01)   :w 24501.4726)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1079.88)  :y (meters  11.15)  :z (meters 776.50)   :w 16651.4765)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 984.40)  :y (meters  11.82)  :z (meters 893.44)    :w 15852.0927)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1118.42)  :y (meters  16.71)  :z (meters 806.76)    :w 17292.8046)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 1070.30)  :y (meters  30.29)  :z (meters 1070.37)   :w -22559.1054)
                                     :boost 1.0
                                     :dist 819200.0)))
                               
                             
                         ;; ctyslumb / burning-bush-1 / city-burning-bush-ring-1
                         (new 'static 'bb-ring-info
                           :time (seconds 11)
                           :start-pos (new 'static 'vector :x (meters 729.1546) :y (meters 25.8) :z (meters -289.3666) :w 1.0)
                           :rings (new 'static 'boxed-array :type city-race-ring-info
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 626.83)  :y (meters  10.04)  :z (meters -323.90)   :w -22646.9296)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 601.47)  :y (meters  13.00)  :z (meters -268.51) :w 17392.1660)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 676.64)  :y (meters  20.32)  :z (meters -271.09)   :w -3069.5947)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 570.77)  :y (meters  14.0)  :z (meters -228.81)   :w -17064.6386)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 400.14)  :y (meters  24.5)  :z (meters -147.30)   :w -28735.6582)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 460.47)  :y (meters   1.96)  :z (meters -298.17)     :w 13620.4101)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 483.14)  :y (meters   3.07)  :z (meters -367.96)   :w -27646.4511)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 423.84)  :y (meters   1.96)  :z (meters -479.81)   :w 30107.3554)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 546.72)  :y (meters   3.18)  :z (meters -576.03)   :w 21368.4453)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 656.96)  :y (meters   1.93)  :z (meters -529.62)   :w 14343.3710)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 783.73)  :y (meters  10.05)  :z (meters -455.50)   :w -2.9476)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 688.60)  :y (meters  1.93)  :z (meters -431.20)   :w -22940.0625)  ;; back of oracle
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 753.44)  :y (meters  13.8)  :z (meters -602.65)   :w 26557.5800)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 765.91)  :y (meters  25.00)  :z (meters -624.55)   :w 30859.7656)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 754.27)  :y (meters   4.04)  :z (meters -703.72)   :w -18397.0214)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 650.36)  :y (meters  26.63)  :z (meters -730.03)   :w -20020.2070)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 558.22)  :y (meters  15.74)  :z (meters -779.34)   :w -12873.2519)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 466.33)  :y (meters  24.23)  :z (meters -770.16)   :w -14754.0263)
                                     :boost 1.0
                                     :dist 819200.0)))
                               
                             
                           ;; ctyport / city-burning-bush-ring-2 / burning-bush-6
                         (new 'static 'bb-ring-info
                           :time (seconds 11)
                           :start-pos (new 'static 'vector :x (meters  49.54)  :y (meters  10.58)  :z (meters 1275.16)  :w 1.0)
                           :rotation 5461.3335
                           :rings (new 'static 'boxed-array :type city-race-ring-info
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters  49.86)  :y (meters  11.12)  :z (meters 1297.63)  :w 2653.0776)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 160.22)  :y (meters  33.26)  :z (meters 1388.26)   :w 17541.584)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 262.24)  :y (meters   7.65)  :z (meters 1383.83)   :w 30091.4882)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 343.14)  :y (meters   3.02)  :z (meters 1330.86)   :w 20894.3554)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 428.51)  :y (meters  11.98)  :z (meters 1407.04)   :w 10127.4072)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 466.80)  :y (meters  16.54)  :z (meters 1486.28)   :w 9217.9921)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 653.59)  :y (meters  11.26)  :z (meters 1657.88)   :w 3838.6264)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 585.81)  :y (meters   3.01)  :z (meters 1798.66)   :w -14335.6796)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 410.22)  :y (meters  -1.61)  :z (meters 1695.71)   :w -24199.4687)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 313.31)  :y (meters   3.88)  :z (meters 1679.38)   :w -9997.4697)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters 157.09)  :y (meters   2.63)  :z (meters 1747.85)   :w -2584.5888)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters  48.66)  :y (meters  19.45)  :z (meters 1772.92)   :w -15493.2763)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -183.45)  :y (meters   3.58)  :z (meters 1789.00)   :w -8958.4716)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -214.47)  :y (meters   7.89)  :z (meters 1913.12)   :w -11745.0302)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -253.84)  :y (meters  16.78)  :z (meters 1657.84)   :w 32445.3476)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -252.87)  :y (meters  40.50)  :z (meters 1650.53)   :w 30517.7753)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -233.49)  :y (meters  10.70)  :z (meters 1577.48)   :w 29548.4804)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -261.90)  :y (meters  17.78)  :z (meters 1437.46)   :w -20735.2148)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -347.73)  :y (meters  14.72)  :z (meters 1437.57)   :w -22038.3398)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -382.42)  :y (meters  14.77)  :z (meters 1286.29)   :w -32753.0820)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -443.73)  :y (meters  14.90)  :z (meters 1131.53)   :w -32444.9179)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -416.26)  :y (meters  11.24)  :z (meters 1090.19)   :w 18710.1562)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -418.61)  :y (meters  15.00)  :z (meters 959.23)   :w -25487.0156)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -351.87)  :y (meters  13.15)  :z (meters 922.04)   :w 17304.3437)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -224.32)  :y (meters  12.67)  :z (meters 937.82)   :w 16220.4501)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -192.16)  :y (meters  10.09)  :z (meters 1009.15)   :w -4108.1542)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -278.64)  :y (meters  15.14)  :z (meters 1168.89)   :w 3533.2504)
                                     :boost 1.0
                                     :dist 819200.0)
                               
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x (meters -272.62)  :y (meters  35.32)  :z (meters 1188.83)   :w 4359.2441)
                                     :boost 1.0
                                     :dist 819200.0)))
                               
                             
                           
                         (new 'static 'bb-ring-info
                           :time (seconds 8)
                           :rings (new 'static 'boxed-array :type city-race-ring-info
                                   (new 'static 'city-race-ring-info
                                     :pos (new 'static 'vector :x 3139584.0 :y 44933.12 :z -241909.77 :w 11339.948)
                                     :boost 1.0
                                     :dist 819200.0)))))
                               
                             
                           
                         
        

(define *city-race-ring-edit-info* (new 'static 'array int32 512
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0
                                     0))
                                     
        

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-ring-1-resolution)
  TASK_MANAGER_INIT_HOOK
  (lambda :behavior task-manager
    ()
    (set-setting! 'minimap 'clear 0.0 (minimap-flag task-graph))
    (set-setting! 'airlock #f 0.0 0)
    (set-setting! 'exclusive-task #f 0.0 (-> self node-info task))
    (let ((s5-0 *traffic-manager*)
          (gp-0 (new 'stack 'traffic-object-spawn-params)))
          
      (set! (-> gp-0 position quad) (-> *bb-ring-info* (-> self info index) start-pos quad))
      (quaternion-axis-angle! (-> gp-0 rotation) 0.0 1.0 0.0 (-> *bb-ring-info* (-> self info index) rotation))
      (set! (-> gp-0 object-type) (traffic-type bikea))
      (set! (-> gp-0 behavior) (the-as uint 0))
      (set! (-> gp-0 id) (the-as uint 0))
      (set! (-> gp-0 proc) #f)
      (send-event s5-0 'spawn-object gp-0)
      (if (-> gp-0 proc)
          (set! (-> self slave 1) (process->handle (-> gp-0 proc)))))
          
      
    (set! (-> self start-time) 0)
    (set! (-> self sub-state) (the-as uint 0))
    (set! (-> self count) 0)
    (set! (-> self max-count) (-> *bb-ring-info* (-> self info index) rings length))
    (none)))
    
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-ring-1-resolution)
  TASK_MANAGER_CLEANUP_HOOK
  (lambda :behavior task-manager () (send-event *traffic-manager* 'restore-default-settings) (none)))
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-ring-1-resolution)
  TASK_MANAGER_UPDATE_HOOK
  (lambda :behavior task-manager
    ()
    (check-time self)
    (cond
      ((and (handle->process (-> self slave 0))
            (-> self slave 0 process 0 next-state)
            (= (-> self slave 0 process 0 next-state name) 'idle)))
            
       
      (else
        (let ((v1-15 (-> self sub-state)))
          (cond
            ((< v1-15 (the-as uint (-> self max-count)))
             (let* ((a1-2 (-> *bb-ring-info* (-> self info index) rings v1-15))
                    (a0-14 (race-ring-spawn self a1-2)))
                    
               (when a0-14
                 (set! (-> self slave 0) (process->handle a0-14))
                 (set! (-> self time-limit) (the-as time-frame (if (zero? (-> self sub-state))
                                                                   4500
                                                                   (the-as int (-> *bb-ring-info* (-> self info index) time))
                                                                   )
                                                    )
                       )
                 (set-time! (-> self start-time))
                 (+! (-> self sub-state) 1)
                 )
               )
             )
            (else
              (go-virtual complete))))))
              
            
          
        
      
    (none)))
    
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-ring-1-resolution)
  TASK_MANAGER_CODE_HOOK
  (lambda :behavior task-manager
    ()
    (while (not (time-elapsed? (-> self state-time) (seconds 5)))
      (suspend)
      )
    (none)
    )
  )

;; og:preserve-this
;; this is unnecessary. the task manager can close the task.
(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-ring-1-resolution)
  TASK_MANAGER_COMPLETE_HOOK
  (lambda :behavior task-manager () (close! (-> self node-info) 'event) (none)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-ring-2-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-ring-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-ring-3-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-ring-1-resolution)))
  

(defpartgroup group-bush-collect
  :id 1056
  :linger-duration (seconds 2)
  :flags (use-local-clock)
  :bounds (static-bspherem 0 0 0 2)
  :parts ((sp-item 4590 :fade-after (meters 220) :period (seconds 0.5) :length (seconds 0.25))
          (sp-item 4591 :fade-after (meters 100))))
    
  

(defpart 4591
  :init-specs ((:texture (new 'static 'texture-id :index #xcb :page #xc))
               (:num 0.0 0.2)
               (:y (meters 2))
               (:scale-x (meters 0.1))
               (:rot-x (degrees 11.25))
               (:rot-z (degrees 0) (degrees 3600))
               (:scale-y :copy scale-x)
               (:r 255.0)
               (:g 255.0)
               (:b 255.0)
               (:a 16.0)
               (:omega (degrees 4511.25))
               (:scalevel-x (meters 0.016666668) (meters 0.0033333334))
               (:scalevel-y :copy scalevel-x)
               (:timer (seconds 0.5))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3))
               (:userdata 2048.0)
               (:next-time (seconds 0.335))
               (:next-launcher 4592)))
    
  

(defpart 4592
  :init-specs ((:fade-a -0.32)))
  

(defpart 4590
  :init-specs ((:texture (new 'static 'texture-id :index #xbb :page #xc))
               (:num 1.0)
               (:y (meters 2))
               (:scale-x (meters 0.8) (meters 0.1))
               (:rot-x (degrees 11.25))
               (:rot-z (degrees -19) (degrees 4))
               (:scale-y :copy scale-x)
               (:r 64.0)
               (:g 255.0)
               (:b 32.0)
               (:a 32.0 4.0)
               (:omega (degrees 4511.25))
               (:timer (seconds 0.017))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow))
               (:userdata 2048.0)))
    
  

(defpart 4593
  :init-specs ((:texture (new 'static 'texture-id :index #xbb :page #xc))
               (:num 1.0)
               (:scale-x (meters 1) (meters 0.1))
               (:rot-x (degrees 2.25))
               (:rot-z (degrees -19) (degrees 4))
               (:scale-y :copy scale-x)
               (:r 255.0)
               (:g 255.0)
               (:b 64.0)
               (:a 12.0 4.0)
               (:omega (degrees 2715.75))
               (:timer (seconds 0.017))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow))
               (:userdata 819.2)))
    
  

(defpart 4594
  :init-specs ((:texture (new 'static 'texture-id :index #xbb :page #xc))
               (:num 1.0)
               (:scale-x (meters 3) (meters 0.1))
               (:rot-x (degrees 4.5))
               (:rot-z (degrees -19) (degrees 4))
               (:scale-y :copy scale-x)
               (:r 0.0)
               (:g 255.0)
               (:b 0.0)
               (:a 12.0 4.0)
               (:omega (degrees 2715.75))
               (:timer (seconds 0.017))
               (:flags (sp-cpuinfo-flag-2 sp-cpuinfo-flag-3 glow))
               (:userdata 819.2)))
    
  

(defskelgroup skel-homing-beacon homing-beacon homing-beacon-lod0-jg homing-beacon-idle-ja
              ((homing-beacon-lod0-mg (meters 999999)))
              :bounds (static-spherem 0 1 0 3))
              

(deftype bush-collect (process-drawable)
  ((minimap    connection-minimap)
   (trans-y    float)
   (beep-time  float)
   )
  (:state-methods
    idle
    die
    )
  (:methods
    (bush-collect-method-22 (_type_) none)
    (bush-collect-method-23 (_type_) none)
    )
  )


(defmethod bush-collect-method-22 ((this bush-collect))
  (let ((s5-0 (new 'process 'collide-shape-moving this (collide-list-enum usually-hit-by-player))))
    (set! (-> s5-0 dynam) (copy *standard-dynamics* 'process))
    (set! (-> s5-0 reaction) cshape-reaction-default)
    (set! (-> s5-0 no-reaction)
          (the-as (function collide-shape-moving collide-query vector vector object) nothing))
          
    (set! (-> s5-0 penetrated-by) (the-as penetrate -1))
    (let ((v1-7 (new 'process 'collide-shape-prim-sphere s5-0 (the-as uint 0))))
      (set! (-> v1-7 prim-core collide-as) (collide-spec collectable))
      (set! (-> v1-7 prim-core collide-with) (collide-spec jak vehicle-sphere hit-by-others-list player-list tobot))
      (set! (-> v1-7 transform-index) 3)
      (set-vector! (-> v1-7 local-sphere) 0.0 2048.0 0.0 16384.0)
      (set! (-> s5-0 total-prims) (the-as uint 1))
      (set! (-> s5-0 root-prim) v1-7))
      
    (set! (-> s5-0 nav-radius) (* 0.75 (-> s5-0 root-prim local-sphere w)))
    (let ((v1-10 (-> s5-0 root-prim)))
      (set! (-> s5-0 backup-collide-as) (-> v1-10 prim-core collide-as))
      (set! (-> s5-0 backup-collide-with) (-> v1-10 prim-core collide-with))
      )
    (set! (-> this root) s5-0)
    )
  0
  (none))
  

(defmethod bush-collect-method-23 ((this bush-collect))
  0
  (none))
  

(defstate idle (bush-collect)
  :virtual #t
  :event (behavior ((proc process) (argc int) (message symbol) (block event-message-block))
    (case message
      (('touch 'attack)
       (sound-play "homeing-pickup")
       (go-virtual die)
       )
      )
    )
  :enter (behavior ()
    '()
    )
  :exit (behavior ()
    '()
    )
  :trans (behavior ()
    (let ((f30-0 (+ (* 0.0033333334 (the float (current-time))) (* 0.1 (the float (-> self pid))))))
      (when (< (-> self beep-time) f30-0)
        (sound-play "homeing-beep")
        (set! (-> self beep-time) (+ 1.0 f30-0))
        )
      (set! (-> self root trans y) (+ (-> self trans-y) (* 4096.0 (* 0.5 (cos (* 21845.334 f30-0))))))
      (quaternion-vector-angle! (-> self root quat) *up-vector* (* 14563.556 f30-0))
      (let ((gp-1 (matrix<-transformq+world-trans!
                    (new 'stack-no-clear 'matrix)
                    (the-as transformq (-> self root trans))
                    (new 'static 'vector :y 2048.0 :w 1.0)
                    )
                  )
            )
        (when (nonzero? (-> self part))
          (spawn-with-matrix (-> self part) gp-1)
          (let ((gp-2 (vector-matrix*!
                        (new 'stack-no-clear 'vector)
                        (vector-rotate-around-y!
                          (new 'stack-no-clear 'vector)
                          (new 'static 'vector :x 1228.8 :y 2252.8 :w 1.0)
                          (* 145635.56 f30-0)
                          )
                        gp-1
                        )
                      )
                )
            (launch-particles (-> *part-id-table* 4593) gp-2)
            (launch-particles (-> *part-id-table* 4594) gp-2)
            )
          )
        )
      )
    )
  :code sleep-code
  :post (behavior ()
    (ja-post)
    )
  )

(defstate die (bush-collect)
  :virtual #t
  :code (behavior ()
    (cleanup-for-death self)
    )
  )

;; WARN: Return type mismatch entity-perm-status vs none.
(defmethod init-from-entity! ((this bush-collect) (arg0 entity-actor))
  "Typically the method that does the initial setup on the process, potentially using the [[entity-actor]] provided as part of that.
This commonly includes things such as:
- stack size
- collision information
- loading the skeleton group / bones
- sounds"
  (process-entity-status! this (entity-perm-status dead) #t)
  (none)
  )

;; WARN: Return type mismatch object vs none.
(defbehavior bush-collect-init-by-other bush-collect ((arg0 vector))
  (logior! (-> self mask) (process-mask bit18))
  (stack-size-set! (-> self main-thread) 16)
  (bush-collect-method-22 self)
  (set! (-> self root trans quad) (-> arg0 quad))
  (quaternion-copy! (-> self root quat) *unity-quaternion*)
  (bush-collect-method-23 self)
  (set! (-> self part) (create-launch-control (-> *part-group-id-table* 1056) self))
  (go-virtual idle)
  (none))
  

;; WARN: Return type mismatch object vs none.
(defbehavior bush-collect-dark-eco-init-by-other bush-collect ((arg0 vector))
  (logior! (-> self mask) (process-mask bit18))
  (stack-size-set! (-> self main-thread) 16)
  (bush-collect-method-22 self)
  (set! (-> self root trans quad) (-> arg0 quad))
  (quaternion-copy! (-> self root quat) *unity-quaternion*)
  (bush-collect-method-23 self)
  (set! (-> self part) (create-launch-control (-> *part-group-id-table* 82) self))
  (go-virtual idle)
  (none))
  

;; WARN: Return type mismatch object vs none.
(defbehavior bush-collect-homing-beacon-init-by-other bush-collect ((arg0 vector))
  (set! (-> self level) (level-get *level* 'lbbush))
  (logior! (-> self mask) (process-mask bit18))
  (stack-size-set! (-> self main-thread) 16)
  (bush-collect-method-22 self)
  (set! (-> self root trans quad) (-> arg0 quad))
  (set-vector! (-> self root scale) 2.0 2.0 2.0 1.0)
  (quaternion-copy! (-> self root quat) *unity-quaternion*)
  (bush-collect-method-23 self)
  (set! (-> self trans-y) (-> self root trans y))
  (initialize-skeleton
    self
    (the-as skeleton-group (art-group-get-by-name *level* "skel-homing-beacon" (the-as (pointer uint32) #f)))
    (the-as pair 0))
    
  (set! (-> self part) (create-launch-control (-> *part-group-id-table* 1056) self))
  (go-virtual idle)
  (none))
  

;; WARN: Return type mismatch (pointer process) vs (pointer bush-collect).
(defun bush-collect-spawn ((arg0 task-manager) (arg1 vector))
  (process-spawn bush-collect arg1 :to arg0))
  

;; WARN: Return type mismatch (pointer process) vs (pointer bush-collect).
(defun bush-collect-homing-beacon-spawn ((arg0 task-manager) (arg1 vector))
  (process-spawn bush-collect :init bush-collect-homing-beacon-init-by-other arg1 :to arg0))
  

;; WARN: Return type mismatch (pointer process) vs (pointer bush-collect).
(defun bush-collect-dark-eco-spawn ((arg0 task-manager) (arg1 vector))
  (process-spawn bush-collect :init bush-collect-dark-eco-init-by-other arg1 :to arg0))
  

(deftype burning-bush-collection-info (structure)
  ((pos      vector  :inline)
   (handle   handle)
   (minimap  connection-minimap)
   )
  (:methods
    (burning-bush-collection-info-method-9 (_type_ object) none)
    )
  )


(defmethod burning-bush-collection-info-method-9 ((this burning-bush-collection-info) (arg0 object))
  (format arg0 "(static-burning-bush-collection-info~%")
  (format arg0 "     :pos (~4,,2M ~4,,2M ~4,,2M)~%)~%" (-> this pos x) (-> this pos y) (-> this pos z))
  0
  (none))
  

(deftype bb-collection-info (structure)
  ((user-data  uint32)
   (time       time-frame)
   (colls      (array burning-bush-collection-info))
   )
  )


(define *bb-collection-info*
  (new 'static 'boxed-array :type bb-collection-info
    (new 'static 'bb-collection-info  ;; green eco collection in ctygenc
      :user-data #x2
      :time (seconds 261)
      :colls (new 'static 'boxed-array :type burning-bush-collection-info

              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 200.55)  :y (meters   9.05)  :z (meters  16.03)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 153.91)  :y (meters   14.7)  :z (meters  33.69)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  75.88)  :y (meters  10.48)  :z (meters   8.78)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  61.19)  :y (meters   9.80)  :z (meters  91.81)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  41.93)  :y (meters  10.26)  :z (meters 164.76)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  57.67)  :y (meters   8.59)  :z (meters 223.12)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  95.64)  :y (meters  15.55)  :z (meters 205.32)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 160.70)  :y (meters  16.18)  :z (meters 183.92)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 192.00)  :y (meters  17.90)  :z (meters 136.29)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 230.96)  :y (meters  15.53)  :z (meters 179.46)  ))

              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 337.37)  :y (meters  10.29)  :z (meters 233.82)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 340.51)  :y (meters  10.37)  :z (meters 272.34)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 334.37)  :y (meters   9.69)  :z (meters 377.89)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 264.43)  :y (meters  10.60)  :z (meters 367.32)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 223.77)  :y (meters  18.42)  :z (meters 367.99)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 146.16)  :y (meters  18.42)  :z (meters 404.85)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters   7.91)  :y (meters  23.81)  :z (meters 402.50)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  48.02)  :y (meters  21.45)  :z (meters 530.37)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  53.69)  :y (meters  24.38)  :z (meters 599.56)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  30.38)  :y (meters  27.04)  :z (meters 727.24)  ))

              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  75.11)  :y (meters  18.42)  :z (meters 792.76)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 142.70)  :y (meters  16.36)  :z (meters 737.81)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 182.12)  :y (meters   9.60)  :z (meters 828.02)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 115.98)  :y (meters   8.80)  :z (meters 910.68)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 117.76)  :y (meters  15.41)  :z (meters 994.82)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  95.79)  :y (meters   9.03)  :z (meters 1064.41)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 191.92)  :y (meters  13.85)  :z (meters 1052.38)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 280.72)  :y (meters   9.59)  :z (meters 1045.69)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 309.06)  :y (meters   9.44)  :z (meters 978.23)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 305.09)  :y (meters  18.07)  :z (meters 866.48)  ))

              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 228.55)  :y (meters  17.72)  :z (meters 838.14)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 228.00)  :y (meters   9.59)  :z (meters 741.15)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 289.66)  :y (meters  18.41)  :z (meters 751.85)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 380.68)  :y (meters  18.41)  :z (meters 791.90)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 372.63)  :y (meters  21.45)  :z (meters 648.20)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 366.79)  :y (meters  17.35)  :z (meters 585.00)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 372.43)  :y (meters  21.46)  :z (meters 503.81)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 370.59)  :y (meters  17.17)  :z (meters 404.86)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 283.63)  :y (meters  17.38)  :z (meters 466.17)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 194.44)  :y (meters  26.23)  :z (meters 466.76)  ))

              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  63.50)  :y (meters  29.16)  :z (meters 671.76)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -19.23)  :y (meters  17.61)  :z (meters 667.14)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -130.17)  :y (meters  13.11)  :z (meters 674.25) ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -26.50)  :y (meters   8.85)  :z (meters 715.39)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 157.43)  :y (meters  11.37)  :z (meters 1162.58)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 192.07)  :y (meters   8.34)  :z (meters 1314.17)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 231.67)  :y (meters   4.97)  :z (meters 1248.69)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 237.56)  :y (meters   8.47)  :z (meters 1150.89)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 393.53)  :y (meters  22.91)  :z (meters 712.78)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 536.49)  :y (meters  25.11)  :z (meters 705.89)  ))

              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 519.23)  :y (meters  25.05)  :z (meters 596.97)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 493.47)  :y (meters  27.43)  :z (meters 682.28)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 573.38)  :y (meters  25.05)  :z (meters 617.87)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 666.56)  :y (meters  21.16)  :z (meters 579.94)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 742.12)  :y (meters  10.67)  :z (meters 412.22)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 750.61)  :y (meters  10.43)  :z (meters 450.64)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 399.58)  :y (meters  20.68)  :z (meters 685.29)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 288.45)  :y (meters  15.94)  :z (meters 205.43)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 372.97)  :y (meters  17.41)  :z (meters 305.23)  ))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -89.12)  :y (meters   8.97)  :z (meters 728.82)  ))
              ))
        
      
    (new 'static 'bb-collection-info ;; beacon collection in ctygenb
      :time (seconds 120)
      :colls (new 'static 'boxed-array :type burning-bush-collection-info
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 281.16)  :y (meters  17.60)  :z (meters -353.69)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 350.25)  :y (meters  11.59)  :z (meters -438.71)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 287.68)  :y (meters  13.70)  :z (meters -405.16)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 149.54)  :y (meters  13.95)  :z (meters -423.66)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 222.62)  :y (meters  10.03)  :z (meters -490.01)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 205.58)  :y (meters  13.97)  :z (meters -585.56)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  96.01)  :y (meters  12.61)  :z (meters -695.83)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 218.70)  :y (meters  11.59)  :z (meters -760.16)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 329.20)  :y (meters  11.59)  :z (meters -646.00)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 300.46)  :y (meters   9.82)  :z (meters -517.10)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 363.84)  :y (meters  14.85)  :z (meters -370.40)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 308.07)  :y (meters  12.06)  :z (meters -203.53)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 264.47)  :y (meters   8.60)  :z (meters -312.85)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 204.38)  :y (meters   8.60)  :z (meters -184.65)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 113.06)  :y (meters  14.32)  :z (meters -170.26)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  57.21)  :y (meters   8.60)  :z (meters -194.70)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  13.28)  :y (meters  15.97)  :z (meters -243.24)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 359.77)  :y (meters   1.45)  :z (meters -312.40)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters  95.27)  :y (meters  11.04)  :z (meters -247.97)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters 170.29)  :y (meters   9.57)  :z (meters -371.03)))))
        
      
    (new 'static 'bb-collection-info  ;; dark eco collection in ctyfarma
      :user-data #x1
      :time (seconds 110)
      :colls (new 'static 'boxed-array :type burning-bush-collection-info
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -373.37)  :y (meters 11.74)  :z (meters 92.11)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -379.35)  :y (meters  16.05)  :z (meters  42.60)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -401.85)  :y (meters  13.78)  :z (meters   0.09)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -328.39)  :y (meters   8.49)  :z (meters -13.25)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -328.17)  :y (meters  10.95)  :z (meters  87.98)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -309.78)  :y (meters  11.17)  :z (meters 110.63)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -262.88)  :y (meters  12.93)  :z (meters  89.82)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -222.35)  :y (meters  17.92)  :z (meters  92.06)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -230.60)  :y (meters  19.94)  :z (meters  46.76)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -147.87)  :y (meters  13.35)  :z (meters 101.88)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -39.71)  :y (meters   8.28)  :z (meters  96.14)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -41.73)  :y (meters   8.59)  :z (meters 166.43)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -26.05)  :y (meters  20.15)  :z (meters 316.52)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -106.78)  :y (meters   8.59)  :z (meters 335.10)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -170.76)  :y (meters   7.75)  :z (meters 358.36)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -241.07)  :y (meters   8.47)  :z (meters 342.40)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -309.86)  :y (meters   8.83)  :z (meters 372.03)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -338.63)  :y (meters   9.03)  :z (meters 329.98)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -327.5569)  :y (meters 16.4761)  :z (meters 279.9313)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -363.51)  :y (meters   8.59)  :z (meters 222.04)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -395.78)  :y (meters  24.46)  :z (meters 154.80)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -264.17)  :y (meters  11.27)  :z (meters 177.16)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -246.59)  :y (meters  10.97)  :z (meters 200.28)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -226.94)  :y (meters  13.02)  :z (meters 169.86)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -207.44)  :y (meters  10.83)  :z (meters 193.40)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -142.64)  :y (meters  13.70)  :z (meters 200.30)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -117.10)  :y (meters  11.00)  :z (meters 195.39)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -413.91)  :y (meters  26.35)  :z (meters 218.54)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -124.51)  :y (meters  16.29)  :z (meters 274.91)))
              (new 'static 'burning-bush-collection-info :pos (new 'static 'vector :x (meters -187.24)  :y (meters  19.99)  :z (meters 263.89)))))
        
      
    (new 'static 'bb-collection-info
      :time (seconds 120)
      :colls (new 'static 'boxed-array :type burning-bush-collection-info (new 'static 'burning-bush-collection-info)))))
      
    
  

(define *city-bb-collection-edit-info* (new 'static 'array int32 512
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0
                                         0))
                                         
        

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-collection-1-resolution)
  TASK_MANAGER_CLEANUP_HOOK
  (lambda :behavior task-manager
    ()
    (let ((v1-4 (-> *bb-collection-info* (-> self info index))))
      (dotimes (a0-1 (-> v1-4 colls length))
        (when (and (-> v1-4 colls a0-1 minimap) (nonzero? (-> v1-4 colls a0-1 minimap)))
          (logior! (-> v1-4 colls a0-1 minimap flags) (minimap-flag fade-out))
          (set! (-> v1-4 colls a0-1 minimap) #f))))
          
        
      
    (none)))
    
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-collection-1-resolution)
  TASK_MANAGER_INIT_HOOK
  (lambda :behavior task-manager
    ()
    (set-setting! 'airlock #f 0.0 0)
    (set-setting! 'exclusive-task #f 0.0 (-> self node-info task))
    (let ((gp-0 (-> *bb-collection-info* (-> self info index))))
      (let ((v1-9 (-> gp-0 user-data)))
        (cond
          ((zero? v1-9)
           (set! (-> self hud-counter)
                 (ppointer->handle (process-spawn hud-homing-beacon :init hud-init-by-other :to *target*))))
                 
           
          ((= v1-9 1)
           (set! (-> self hud-counter)
                 (ppointer->handle (process-spawn hud-dark-eco-pickup :init hud-init-by-other :to *target*))))
                 
           
          ((= v1-9 2)
           (set! (-> self hud-counter)
                 (ppointer->handle (process-spawn hud-green-eco-pickup :init hud-init-by-other :to *target*))))))
                 
           
          
        
      (dotimes (s5-3 (-> gp-0 colls length))
        (let ((v1-32 (-> gp-0 user-data)))
          (cond
            ((zero? v1-32)
             (set! (-> gp-0 colls s5-3 handle)
                   (ppointer->handle (bush-collect-homing-beacon-spawn self (-> gp-0 colls s5-3 pos))))
                   
             (set! (-> gp-0 colls s5-3 minimap) (add-icon!
                                                  *minimap*
                                                  (handle->process (-> gp-0 colls s5-3 handle))
                                                  (the-as uint 16)
                                                  (the-as int #f)
                                                  (the-as vector #t)
                                                  0)))
                                                  
                   
             
            ((= v1-32 1)
             (let ((t1-3 (new 'stack 'fact-info self (pickup-type eco-pill-random) (-> *FACT-bank* default-eco-pill-green-inc))))
                   
               (new 'stack-no-clear 'vector)
               (logior! (-> t1-3 options) (actor-option fade-out no-distance-check-fadeout))
               (set! (-> t1-3 fade-time) (-> gp-0 time))
               (set! (-> gp-0 colls s5-3 handle)
                     (ppointer->handle
                       (birth-pickup-at-point (-> gp-0 colls s5-3 pos) (pickup-type eco-pill-dark) 1.0 #t self t1-3))))
                       
                     
               
             (set! (-> gp-0 colls s5-3 minimap) (add-icon!
                                                  *minimap*
                                                  (handle->process (-> gp-0 colls s5-3 handle))
                                                  (the-as uint 16)
                                                  (the-as int #f)
                                                  (the-as vector #t)
                                                  0)))
                                                  
                   
             
            ((= v1-32 2)
             (let ((t1-5 (new 'stack 'fact-info self (pickup-type eco-pill-random) (-> *FACT-bank* default-eco-pill-green-inc))))
                   
               (new 'stack-no-clear 'vector)
               (logior! (-> t1-5 options) (actor-option fade-out no-distance-check-fadeout))
               (set! (-> t1-5 fade-time) (-> gp-0 time))
               (set! (-> gp-0 colls s5-3 handle)
                     (ppointer->handle
                       (birth-pickup-at-point (-> gp-0 colls s5-3 pos) (pickup-type eco-pill-green) 1.0 #t self t1-5))))
                       
                     
               
             (set! (-> gp-0 colls s5-3 minimap) (add-icon!
                                                  *minimap*
                                                  (handle->process (-> gp-0 colls s5-3 handle))
                                                  (the-as uint 16)
                                                  (the-as int #f)
                                                  (the-as vector #t)
                                                  0)))
                                                  
                   
             
            (else
              (set! (-> gp-0 colls s5-3 handle) (ppointer->handle (bush-collect-spawn self (-> gp-0 colls s5-3 pos))))
              (set! (-> gp-0 colls s5-3 minimap) #f)
              )
            )
          )
        )
      (set-time! (-> self start-time))
      (set! (-> self time-limit) (-> gp-0 time))
      )
    (none)
    )
  )

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-collection-1-resolution)
  TASK_MANAGER_UPDATE_HOOK
  (lambda :behavior task-manager
    ()
    (check-time self)
    (let ((a0-2 (-> *bb-collection-info* (-> self info index)))
          (v1-6 0))
          
      (dotimes (a1-0 (-> a0-2 colls length))
        (cond
          ((and (nonzero? (-> a0-2 colls a1-0 handle)) (handle->process (-> a0-2 colls a1-0 handle)))
           (+! v1-6 1))
           
          (else
            (when (-> a0-2 colls a1-0 minimap)
              (logior! (-> a0-2 colls a1-0 minimap flags) (minimap-flag fade-out))
              (set! (-> a0-2 colls a1-0 minimap) #f)))))
              
            
          
        
      (set! (-> *game-info* counter) (the float v1-6))
      (if (zero? v1-6)
          (go-virtual complete)))
          
      
    (none)))
    
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-collection-1-resolution)
  TASK_MANAGER_CODE_HOOK
  (lambda :behavior task-manager () (set-time! (-> self state-time)) (none))
  )

;; og:preserve-this added complete hook for collection bbush tasks where we wait for the hud to die first
(set-subtask-hook! *game-info* (game-task-node city-burning-bush-collection-1-resolution)
  TASK_MANAGER_COMPLETE_HOOK
  (lambda :behavior task-manager ()
    (while (handle->process (-> self hud-counter))
      (suspend))))

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-collection-2-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-collection-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-collection-3-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-collection-1-resolution)))
  

(deftype burning-bush-get-on-info (structure)
  ((trans         vector      :inline)
   (quat          quaternion  :inline)
   (camera-trans  vector      :inline)
   (camera-rot    float       9)
   (time          float)
   )
  )


(define *burning-bush-get-on-info*
  (new 'static 'boxed-array :type burning-bush-get-on-info
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x -1530670.2 :y 32765.543 :z 2502434.0 :w 1.0)
      :quat (new 'static 'quaternion :y -0.6321 :w 0.7748)
      :camera-trans (new 'static 'vector :x -1503602.2 :y 62047.027 :z 2475579.5 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.689 0.0 0.7247 -0.3328 0.8882 0.3164 -0.6437 -0.4592 0.612)
      :time 6000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 4318766.0 :y 2145.8943 :z 808666.3 :w 1.0)
      :quat (new 'static 'quaternion :y -0.9999 :w -0.0115)
      :camera-trans (new 'static 'vector :x 4387209.0 :y 39837.285 :z 818740.44 :w 1.0)
      :camera-rot (new 'static 'array float 9 -0.1641 0.0 0.9864 -0.4679 0.8803 -0.0778 -0.8683 -0.4744 -0.1444)
      :time 6000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 3322434.0 :y 99432.445 :z 3684668.2 :w 1.0)
      :quat (new 'static 'quaternion :y -0.9923 :w 0.1235)
      :camera-trans (new 'static 'vector :x 3332904.2 :y 134062.48 :z 3737897.0 :w 1.0)
      :camera-rot (new 'static 'array float 9 -0.9774 0.0 0.2113 -0.0762 0.9325 -0.3528 -0.197 -0.361 -0.9114)
      :time 6000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 663325.5 :y 17938.842 :z 4885086.0 :w 1.0)
      :quat (new 'static 'quaternion :y -0.4768 :w -0.879)
      :camera-trans (new 'static 'vector :x 730486.4 :y 66763.164 :z 4933765.0 :w 1.0)
      :camera-rot (new 'static 'array float 9 -0.5022 0.0 0.8647 -0.3772 0.8998 -0.2191 -0.7781 -0.4362 -0.4518)
      :time 10500.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 570983.6 :y 94438.6 :z 4240269.0 :w 1.0)
      :quat (new 'static 'quaternion :y 0.9299 :w -0.3677)
      :camera-trans (new 'static 'vector :x 493339.44 :y 129311.945 :z 4223747.0 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.1785 0.0 -0.9839 0.4944 0.8645 0.0897 0.8506 -0.5025 0.1543)
      :time 12000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x -168806.81 :y 48443.8 :z 3844239.8 :w 1.0)
      :quat (new 'static 'quaternion :y 0.9837 :w 0.1795)
      :camera-trans (new 'static 'vector :x -151019.92 :y 94520.12 :z 3768899.2 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.9513 0.0 0.3082 -0.1497 0.874 0.4621 -0.2694 -0.4858 0.8314)
      :time 9000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x -622166.8 :y 38157.105 :z 788430.44 :w 1.0)
      :quat (new 'static 'quaternion :y 0.9294 :w -0.3688)
      :camera-trans (new 'static 'vector :x -655421.44 :y 38743.246 :z 755565.4 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.7391 0.0 -0.6735 -0.1633 0.9701 -0.1792 0.6534 0.2424 0.717)
      :time 6000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x -981622.4 :y 32762.266 :z -1378460.9 :w 1.0)
      :quat (new 'static 'quaternion :y -0.9881 :w -0.1537)
      :camera-trans (new 'static 'vector :x -1001924.2 :y 76537.445 :z -1419026.9 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.8637 0.0 -0.5039 0.2989 0.8051 0.5122 0.4057 -0.5931 0.6953)
      :time 6000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 1437632.9 :y 41757.082 :z -1262564.5 :w 1.0)
      :quat (new 'static 'quaternion :y 0.409 :w -0.9125)
      :camera-trans (new 'static 'vector :x 1451820.2 :y 44497.305 :z -1328512.2 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.9983 0.0 0.0578 0.0045 0.9969 -0.0777 -0.0576 0.0778 0.9952)
      :time 6000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 783885.1 :y 40796.16 :z -705780.5 :w 1.0)
      :quat (new 'static 'quaternion :y -0.6938 :w 0.7201)
      :camera-trans (new 'static 'vector :x 741225.7 :y 46757.887 :z -776107.2 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.9057 0.0 -0.4238 -0.0939 0.9751 -0.2007 0.4132 0.2216 0.8832)
      :time 6000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 2180319.2 :y -443.1872 :z -2409681.2 :w 1.0)
      :quat (new 'static 'quaternion :y -0.8512 :w 0.5248)
      :camera-trans (new 'static 'vector :x 2186967.0 :y 4454.8096 :z -2441144.2 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.9628 0.0 0.2698 0.02 0.9972 -0.0715 -0.2691 0.0743 0.9602)
      :time 6000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 609418.06 :y 32768.0 :z -1476082.9 :w 1.0)
      :quat (new 'static 'quaternion :y -0.9919 :w 0.1265)
      :camera-trans (new 'static 'vector :x 600542.8 :y 37365.35 :z -1515416.8 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.9811 0.0 -0.1932 -0.0172 0.996 -0.0875 0.1924 0.0892 0.9772)
      :time 9000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 2543148.8 :y 37827.38 :z 3158161.5 :w 1.0)
      :quat (new 'static 'quaternion :y -0.9581 :w 0.2863)
      :camera-trans (new 'static 'vector :x 2513162.2 :y 68558.03 :z 3066508.5 :w 1.0)
      :camera-rot (new 'static 'array float 9 0.9036 0.0 -0.4281 0.1063 0.9686 0.2244 0.4147 -0.2483 0.8753)
      :time 9000.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 1663103.0 :y 34921.266 :z 2111440.0 :w 1.0)
      :quat (new 'static 'quaternion :y 0.562 :w 0.8271)
      :camera-trans (new 'static 'vector :x 1741256.8 :y 131765.86 :z 2247819.8 :w 1.0)
      :camera-rot (new 'static 'array float 9 -0.9324 0.0 0.3611 -0.1247 0.9384 -0.322 -0.3389 -0.3453 -0.8751)
      :time 7500.0)
      
    (new 'static 'burning-bush-get-on-info
      :trans (new 'static 'vector :x 4012071.2 :y 102169.805 :z 3209066.5 :w 1.0)
      :quat (new 'static 'quaternion :y 0.6466 :w 0.7627)
      :camera-trans (new 'static 'vector :x 4028088.8 :y 103657.47 :z 3221753.8 :w 1.0)
      :camera-rot (new 'static 'array float 9 -0.449 0.0 0.8934 0.2339 0.9651 0.1175 -0.8623 0.2617 -0.4334)
      :time 7500.0)))
      
    
  

(defun mod-override-burning-bush-get-on! ((info burning-bush-get-on-info) (task game-task))
  (case task
    ;; === ctygena (canals near farm) ===
    (((game-task city-burning-bush-get-to-14))  ;; on awning near first turn from farm
      (set-vector-meters! (-> info trans) -284.7  31.5 -273.8)  ;; in gap among billboards
      (set-vector! (-> info camera-trans) -1147260.2500 148365.6562 -1051547.750 1.0)
      (set! (-> info camera-rot 0) -0.9957) (set! (-> info camera-rot 1) -0.0000) (set! (-> info camera-rot 2) 0.0923)
      (set! (-> info camera-rot 3) -0.0113) (set! (-> info camera-rot 4) 0.9924) (set! (-> info camera-rot 5) -0.1219)
      (set! (-> info camera-rot 6) -0.0916) (set! (-> info camera-rot 7) -0.1224) (set! (-> info camera-rot 8) -0.9882)
      (set! (-> info time) 3250.0))
      
    (((game-task city-burning-bush-get-to-11))  ;; on rooftop above normal position, towards ctygenb
      (set-vector-meters! (-> info trans) -128.62  14.94 -290.43  )  ;; on doorframe near turret and lurker escape pipe
      (set-vector! (-> info camera-trans) (meters -120.3722) (meters 19.6301) (meters -300.1393) 1.0)
      (set! (-> info camera-rot 0)  0.7515) (set! (-> info camera-rot 1) -0.0000) (set! (-> info camera-rot 2) 0.6596)
      (set! (-> info camera-rot 3) -0.0754) (set! (-> info camera-rot 4)  0.9934) (set! (-> info camera-rot 5) 0.0859)
      (set! (-> info camera-rot 6) -0.6553) (set! (-> info camera-rot 7) -0.1144) (set! (-> info camera-rot 8) 0.7466)
      (set! (-> info time) 4050.0))

    ;; === ctygenb (canals near farm) ===
    (((game-task city-burning-bush-get-to-9))  ;; burning-bush-15 ;; near entrance to stadium
     (set-vector-meters! (-> info trans) 171.61  20.60 -366.81)  ;; over doorway in useless loop, near leftover OOB parking-spot
     (set-vector! (-> info camera-trans) (meters 173.0084) (meters 25.1557) (meters -351.0474) 1.0)
     (set! (-> info camera-rot 0)   -0.9858) (set! (-> info camera-rot 1)  -0.0000) (set! (-> info camera-rot 2)  0.1677)
      (set! (-> info camera-rot 3)  -0.0204) (set! (-> info camera-rot 4)   0.9925) (set! (-> info camera-rot 5)  -0.1203)
      (set! (-> info camera-rot 6)  -0.1664) (set! (-> info camera-rot 7)  -0.1220) (set! (-> info camera-rot 8)  -0.9784)
      (set! (-> info time) 3600.0))
      
    ;; === ctyslumb (near prison exit) ====
    (((game-task city-burning-bush-get-to-1))  ;; behind fruit stands near yellow barrier skip
     (set-vector-meters! (-> info trans) 891.46   0.8 351.41) ;; in trench closer to fortress, at ramp in middle
     (set-vector! (-> info camera-trans) 3607523.7500  22645.5039 1377616.7500 1.0)
     (set! (-> info camera-rot 0) 0.6236) (set! (-> info camera-rot 1) 0.0000) (set! (-> info camera-rot 2) -0.7816)
      (set! (-> info camera-rot 3) 0.0934) (set! (-> info camera-rot 4) 0.9928) (set! (-> info camera-rot 5) 0.0745)
      (set! (-> info camera-rot 6) 0.7760) (set! (-> info camera-rot 7) -0.1195) (set! (-> info camera-rot 8) 0.6192)
      (set! (-> info time) 5600.0))
      
    (((game-task city-burning-bush-get-to-13)) ;; atop roundabout building towards ctysluma
     (set-vector-meters! (-> info trans) 761.9  32.0 -278.9)  ;; balcony near roundabout farther into ctyslumb
     (set-vector! (-> info camera-trans) 3110917.2500 136020.1250 -1186875.5000 1.0)
     (set! (-> info camera-rot 0) 0.9980) (set! (-> info camera-rot 1) 0.0000) (set! (-> info camera-rot 2) 0.0630)
      (set! (-> info camera-rot 3) -0.0139) (set! (-> info camera-rot 4) 0.9753) (set! (-> info camera-rot 5) 0.2202)
      (set! (-> info camera-rot 6) -0.0614) (set! (-> info camera-rot 7) -0.2206) (set! (-> info camera-rot 8) 0.9734)
      (set! (-> info time) 6600.0))
      
    ;; === ctyslumc (waterslums)
    (((game-task city-burning-bush-get-to-4)) ;; atop small building in corner 
     (set-vector-meters! (-> info trans) 409.79  24.03 -403.63)  ;; atop small building towards entrance
     (set-vector! (-> info camera-trans) 1740262.5000 107883.6562 -1635763.6250 1.0)
     (set! (-> info camera-rot 0) -0.3031) (set! (-> info camera-rot 1) -0.0000) (set! (-> info camera-rot 2) 0.9529)
      (set! (-> info camera-rot 3) -0.2271) (set! (-> info camera-rot 4) 0.9711) (set! (-> info camera-rot 5) -0.0722)
      (set! (-> info camera-rot 6) -0.9254) (set! (-> info camera-rot 7) -0.2383) (set! (-> info camera-rot 8) -0.2944)
      (set! (-> info time) 4000.0))
      
    ;; === ctyfarma (between bazaar and ctygen, with mountain/forest) ===
    (((game-task city-burning-bush-get-to-8))  ;; on wall near sprinkler/ctygen exit ;; 'burning-bush-10
     (set-vector-meters! (-> info trans) -143.22  17.9 197.69)  ;; on other sprinkler closer to mountain airlock (hover over)
     (set-vector! (-> info camera-trans) -541217.5625 93706.0468 787718.6875 1.0)
     (set! (-> info camera-rot 0)  0.3915) (set! (-> info camera-rot 1)  0.0000) (set! (-> info camera-rot 2) 0.9201)
      (set! (-> info camera-rot 3) -0.1145) (set! (-> info camera-rot 4)  0.9922) (set! (-> info camera-rot 5) 0.0487)
      (set! (-> info camera-rot 6) -0.9129) (set! (-> info camera-rot 7) -0.1245) (set! (-> info camera-rot 8) 0.3884)
      (set! (-> info time) 4300.0))

    ;; === ctyfarmb ===
    (((game-task city-burning-bush-get-to-5))  ;; behind rock near trees opposite yakows ;; 'burning-bush-14
     (set-vector-meters! (-> info trans) -425.94  22.44 1131.63  )  ;; on overhang jutting out from wall near ctyport
     (set-vector! (-> info camera-trans) (meters -415.6073) (meters 26.5192) (meters 1134.5544) 1.0)
     (set! (-> info camera-rot 0)   -0.4068) (set! (-> info camera-rot 1) -0.0000) (set! (-> info camera-rot 2) 0.9135)
      (set! (-> info camera-rot 3)  -0.1282) (set! (-> info camera-rot 4)  0.9901) (set! (-> info camera-rot 5) -0.0571)
      (set! (-> info camera-rot 6)  -0.9044) (set! (-> info camera-rot 7) -0.1403) (set! (-> info camera-rot 8) -0.4028)
      (set! (-> info time) 6300.0))
      
    ;; === ctyport ===
    (((game-task city-burning-bush-get-to-3))  ;; jak 3 moment
     (set-vector-meters! (-> info trans) 336.2  19.62 1729.20)
     (set-vector! (-> info camera-trans) 1295809.2500 85190.6562 7002001.500 1.0)
     (set! (-> info camera-rot 0) 0.5216) (set! (-> info camera-rot 1)  0.0000) (set! (-> info camera-rot 2) -0.8531)
      (set! (-> info camera-rot 3) 0.2889) (set! (-> info camera-rot 4)  0.9409) (set! (-> info camera-rot 5)  0.1766)
      (set! (-> info camera-rot 6) 0.8027) (set! (-> info camera-rot 7) -0.3386) (set! (-> info camera-rot 8)  0.4908)
      (set! (-> info time) 1030.0))
    
    ;; === ctyinda ===
    (((game-task city-burning-bush-get-to-10)) ;; corner pocket by consite
     (set-vector-meters! (-> info trans) 819.2  8.6 813.3)
     (set-vector! (-> info camera-trans) 3348314.2500 66771.1562 3301103.0000 1.0)
     (set! (-> info camera-rot 0)  0.9733) (set! (-> info camera-rot 1)  0.0000) (set! (-> info camera-rot 2) 0.2291)
      (set! (-> info camera-rot 3) -0.1043) (set! (-> info camera-rot 4)  0.8902) (set! (-> info camera-rot 5) 0.4433)
      (set! (-> info camera-rot 6) -0.2039) (set! (-> info camera-rot 7) -0.4555) (set! (-> info camera-rot 8) 0.8665)
      (set! (-> info time) 3500.0))
      
    ;; === ctyindb ===
    (((game-task city-burning-bush-get-to-2)) ;; gap in billboard, corner near sewers entrance
     (set-vector-meters! (-> info trans) 1071.0  46.48 547.96)
     (set-vector! (-> info camera-trans) 4288069.5000 57702.9648 2245457.000 1.0)
     (set! (-> info camera-rot 0)   0.5846) (set! (-> info camera-rot 1) 0.0000) (set! (-> info camera-rot 2) -0.8113)
      (set! (-> info camera-rot 3) -0.5898) (set! (-> info camera-rot 4) 0.6866) (set! (-> info camera-rot 5) -0.4250)
      (set! (-> info camera-rot 6)  0.5570) (set! (-> info camera-rot 7) 0.7270) (set! (-> info camera-rot 8)  0.4014)
      (set! (-> info time) 4850.0))
      
    ;; === ctymarka ===
    (((game-task city-burning-bush-get-to-12)) ;; 
     (set-vector-meters! (-> info trans)-340.94    8.5  400.43)
     (set-vector-meters! (-> info camera-trans) -326.7774  14.0925  406.8686)
     (set! (-> info camera-rot 0)  -0.5997) (set! (-> info camera-rot 1) 0.0000) (set! (-> info camera-rot 2)   0.8001)
      (set! (-> info camera-rot 3) -0.1062) (set! (-> info camera-rot 4) 0.9911) (set! (-> info camera-rot 5)  -0.0796)
      (set! (-> info camera-rot 6) -0.7931) (set! (-> info camera-rot 7) -0.1328) (set! (-> info camera-rot 8) -0.5944)
      (set! (-> info time) 5000.0))

    ;; === ctymarkb ===
    (((game-task city-burning-bush-get-to-6)) ;; burning-bush-13 / bbush-markb-2
     (set-vector-meters! (-> info trans) 703.45  9.0 635.12 )
     (set-vector-meters! (-> info camera-trans) 710.0449  20.6847  628.7670)
     (set! (-> info camera-rot 0)   0.4471) (set! (-> info camera-rot 1)   0.0000) (set! (-> info camera-rot 2)  0.8944)
      (set! (-> info camera-rot 3) -0.5937) (set! (-> info camera-rot 4)   0.7479) (set! (-> info camera-rot 5)  0.2968)
      (set! (-> info camera-rot 6) -0.6689) (set! (-> info camera-rot 7)  -0.6637) (set! (-> info camera-rot 8)  0.3344)
      (set! (-> info time) 4200.0))

    (((game-task city-burning-bush-get-to-7)) ;; burning-bush-12 / bbush-markb
     (set-vector-meters! (-> info trans) 523.52   8.00 584.92  )
     (set-vector-meters! (-> info camera-trans) 526.5274  11.5800  588.8538)
     (set! (-> info camera-rot 0)  -0.8044) (set! (-> info camera-rot 1) -0.0000) (set! (-> info camera-rot 2)  0.5940)
      (set! (-> info camera-rot 3) -0.1805) (set! (-> info camera-rot 4)  0.9526) (set! (-> info camera-rot 5)  -0.2445)
      (set! (-> info camera-rot 6) -0.5659) (set! (-> info camera-rot 7) -0.3039) (set! (-> info camera-rot 8)  -0.7663)
      (set! (-> info time) 4000.0))

    ;; === ctypal ===
    (((game-task city-burning-bush-get-to-15)) ;; burning-bush-19 / bbush-pal
    ;; 135.90  28.5  1045.38
     (set-vector-meters! (-> info trans) 135.3  28.7616  1044.8)
     (set-vector-meters! (-> info camera-trans) 153.5768  52.8440  1024.9290)
     (set! (-> info camera-rot 0)   0.7094) (set! (-> info camera-rot 1)  0.0000) (set! (-> info camera-rot 2)   0.7047)
      (set! (-> info camera-rot 3) -0.3554) (set! (-> info camera-rot 4)  0.8635) (set! (-> info camera-rot 5)   0.3578)
      (set! (-> info camera-rot 6) -0.6085) (set! (-> info camera-rot 7) -0.5043) (set! (-> info camera-rot 8)   0.6126)
      (set! (-> info time) 8800.0))

    )
      
    
  (none))
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-get-to-1-resolution)
  TASK_MANAGER_INIT_HOOK
  (lambda :behavior task-manager
    ()
    (set-setting! 'airlock #f 0.0 0)
    (set-setting! 'exclusive-task #f 0.0 (-> self node-info task))
    (none)))
    
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-get-to-1-resolution)
  TASK_MANAGER_UPDATE_HOOK
  (lambda :behavior task-manager () (none)))
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-get-to-1-resolution)
  TASK_MANAGER_CLEANUP_HOOK
  (lambda :behavior task-manager
    ()
    (let ((a0-1 (handle->process (-> self slave 0))))
      (if a0-1
          (deactivate a0-1)))
          
      
    (none)))
    
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-get-to-1-resolution)
  TASK_MANAGER_COMPLETE_HOOK
  (lambda :behavior task-manager () (close! (-> self node-info) 'event) (none)))
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-get-to-1-resolution)
  TASK_MANAGER_FAIL_HOOK
  (lambda :behavior task-manager
    ()
    (if (and *target* (focus-test? *target* grabbed))
        (process-release? *target*))
        
    (none)))
    
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-get-to-1-resolution)
  TASK_MANAGER_CODE_HOOK
  (lambda :behavior task-manager
    ()
    (set-setting! 'minimap 'clear 0.0 (minimap-flag minimap))
    (while (not (process-grab? *target* #f))
      (suspend))
      
    (let ((t1-1 (new 'stack 'fact-info self (pickup-type eco-pill-random) (-> *FACT-bank* default-eco-pill-green-inc)))
          (a0-3 (new 'stack-no-clear 'vector)))
          
      (mod-override-burning-bush-get-on! (-> *burning-bush-get-on-info* (-> self info index)) (-> self node-info task))
      (logior! (-> t1-1 options) (actor-option fade-out))
      (set! (-> t1-1 fade-time)
            (the-as time-frame (the int (-> *burning-bush-get-on-info* (-> self info index) time))))
            
      (set! (-> a0-3 quad) (-> *burning-bush-get-on-info* (-> self info index) trans quad))
      (+! (-> a0-3 y) 4096.0)
      (set! (-> self slave 0)
            (ppointer->handle
              (birth-pickup-at-point a0-3 (pickup-type skill) (-> *FACT-bank* super-skill-inc) #t self t1-1)
              )
            )
      )
    (set-time! (-> self start-time))
    (set! (-> self time-limit)
          (the-as time-frame (the int (+ 300.0 (-> *burning-bush-get-on-info* (-> self info index) time)))))
          
    (suspend)
    (send-event (handle->process (-> self slave 0)) 'get-notify self)
    (set-setting! 'interp-time 'abs 0.0 0)
    (set-setting! 'mode-name 'cam-fixed 0.0 0)
    (set! (-> *ACTOR-bank* birth-max) 1000)
    (suspend)
    (let ((gp-0 (new 'stack 'transformq)))
      (let ((v1-45 (-> *burning-bush-get-on-info* (-> self info index)))
            (a1-16 (new 'stack-no-clear 'matrix)))
            
        (set! (-> gp-0 trans quad) (-> v1-45 camera-trans quad))
        (set-vector! (-> gp-0 scale) 1.0 1.0 1.0 1.0)
        (set! (-> a1-16 vector 0 x) (-> v1-45 camera-rot 0))
        (set! (-> a1-16 vector 0 y) (-> v1-45 camera-rot 1))
        (set! (-> a1-16 vector 0 z) (-> v1-45 camera-rot 2))
        (set! (-> a1-16 vector 0 w) 0.0)
        (set! (-> a1-16 vector 1 x) (-> v1-45 camera-rot 3))
        (set! (-> a1-16 vector 1 y) (-> v1-45 camera-rot 4))
        (set! (-> a1-16 vector 1 z) (-> v1-45 camera-rot 5))
        (set! (-> a1-16 vector 1 w) 0.0)
        (set! (-> a1-16 vector 2 x) (-> v1-45 camera-rot 6))
        (set! (-> a1-16 vector 2 y) (-> v1-45 camera-rot 7))
        (set! (-> a1-16 vector 2 z) (-> v1-45 camera-rot 8))
        (set! (-> a1-16 vector 2 w) 0.0)
        (set! (-> a1-16 trans x) 0.0)
        (set! (-> a1-16 trans y) 0.0)
        (set! (-> a1-16 trans z) 0.0)
        (set! (-> a1-16 trans w) 1.0)
        (matrix->quaternion (-> gp-0 quat) a1-16))
        
      (send-event *camera* 'teleport-to-transformq gp-0))
      
    (let ((gp-1 (current-time)))
      (until (time-elapsed? gp-1 (seconds 3))
        (suspend)
        )
      )
    (remove-setting! 'minimap)
    (set! (-> *ACTOR-bank* birth-max) 1000)
    (persist-with-delay *setting-control* 'interp-time (seconds 0.05) 'interp-time 'abs 0.0 0)
    (remove-setting! 'interp-time)
    (remove-setting! 'mode-name)
    (while (not (process-release? *target*))
      (suspend))
      
    (until #f
      (check-time self)
      (suspend))
      
    #f))
    
  

(set-subtask-hook!
  *game-info*
  (game-task-node city-burning-bush-get-to-1-resolution)
  TASK_MANAGER_EVENT_HOOK
  (lambda :behavior task-manager
    ((arg0 process) (arg1 int) (arg2 symbol) (arg3 event-message-block))
    (case arg2
      (('notify)
       (case (-> arg3 param 0)
         (('pickup)
          (go-virtual complete))
          
         (('die)
          (go-virtual fail)))))
          
         
       
      
    (none)))
    
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-2-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-3-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-4-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-5-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-6-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-7-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-8-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-9-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-10-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-11-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-12-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-13-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-14-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(copy-hooks!
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-15-resolution))
  (-> *game-info* sub-task-list (game-task-node city-burning-bush-get-to-1-resolution)))
  

(defmethod draw ((this hud-homing-beacon))
  (set-hud-piece-position!
    (the-as hud-sprite (-> this sprites))
    (the int (+ 457.0 (* 130.0 (-> this offset))))
    160
    )
  (set! (-> this sprites 0 scale-x) 1.0)
  (set! (-> this sprites 0 scale-y) 1.0)
  (set! (-> this sprites 0 flags) (the-as uint 4))
  (set! (-> this strings 0 scale) 0.5)
  (set! (-> this strings 0 flags) (font-flags kerning middle large))
  (format (clear (-> this strings 0 text)) "~D" (-> this values 0 current))
  (set-as-offset-from! (the-as hud-sprite (-> this strings 0 pos)) (the-as vector4w (-> this sprites)) -16 60)
  ((method-of-type hud draw) this)
  0
  (none))
  

(defmethod update-values ((this hud-homing-beacon))
  (set! (-> this values 0 target) (the int (-> *game-info* counter)))
  ((method-of-type hud update-values) this)
  0
  (none))
  

(defmethod init-callback ((this hud-homing-beacon))
  (set! (-> this level) (level-get *level* 'lbbush))
  (set! (-> this gui-id)
        (add-process *gui-control* this (gui-channel hud-middle-right) (gui-action hidden) (-> this name) 81920.0 0)
        )
  (logior! (-> this flags) (hud-flags show))
  (set! (-> this sprites 0 tex) (lookup-texture-by-id (new 'static 'texture-id :page #xd89)))
  (alloc-string-if-needed this 0)
  0
  (none))
  

(defmethod draw ((this hud-dark-eco-pickup))
  (set-hud-piece-position!
    (the-as hud-sprite (-> this sprites))
    (the int (+ 457.0 (* 130.0 (-> this offset))))
    180
    )
  (set! (-> this sprites 0 scale-x) 1.0)
  (set! (-> this sprites 0 scale-y) 1.0)
  (set! (-> this sprites 0 flags) (the-as uint 4))
  (set! (-> this strings 0 flags) (font-flags kerning middle large))
  (set! (-> this strings 0 scale) 0.5)
  (format (clear (-> this strings 0 text)) "~D" (-> this values 0 current))
  (set-as-offset-from! (the-as hud-sprite (-> this strings 0 pos)) (the-as vector4w (-> this sprites)) -16 26)
  ((method-of-type hud draw) this)
  0
  (none))
  

(defmethod update-values ((this hud-dark-eco-pickup))
  (set! (-> this values 0 target) (the int (-> *game-info* counter)))
  ((method-of-type hud update-values) this)
  0
  (none))
  

(defmethod init-callback ((this hud-dark-eco-pickup))
  (set! (-> this gui-id)
        (add-process *gui-control* this (gui-channel hud-middle-right) (gui-action hidden) (-> this name) 81920.0 0)
        )
  (logior! (-> this flags) (hud-flags show))
  (set! (-> this sprites 0 tex) (lookup-texture-by-id (new 'static 'texture-id :index #x46 :page #x67a)))
  (alloc-string-if-needed this 0)
  0
  (none))
  

(defmethod draw ((this hud-green-eco-pickup))
  (set-hud-piece-position!
    (the-as hud-sprite (-> this sprites))
    (the int (+ 457.0 (* 130.0 (-> this offset))))
    180
    )
  (set! (-> this sprites 0 scale-x) 1.0)
  (set! (-> this sprites 0 scale-y) 1.0)
  (set! (-> this sprites 0 flags) (the-as uint 4))
  (set! (-> this strings 0 flags) (font-flags kerning middle large))
  (set! (-> this strings 0 scale) 0.5)
  (format (clear (-> this strings 0 text)) "~D" (-> this values 0 current))
  (set-as-offset-from! (the-as hud-sprite (-> this strings 0 pos)) (the-as vector4w (-> this sprites)) -16 26)
  ((method-of-type hud draw) this)
  0
  (none))
  

(defmethod update-values ((this hud-green-eco-pickup))
  (set! (-> this values 0 target) (the int (-> *game-info* counter)))
  ((method-of-type hud update-values) this)
  0
  (none))
  

(defmethod init-callback ((this hud-green-eco-pickup))
  (set! (-> this gui-id)
        (add-process *gui-control* this (gui-channel hud-middle-right) (gui-action hidden) (-> this name) 81920.0 0)
        )
  (logior! (-> this flags) (hud-flags show))
  (set! (-> this sprites 0 tex) (lookup-texture-by-id (new 'static 'texture-id :index #x47 :page #x67a)))
  (alloc-string-if-needed this 0)
  0
  (none))
  
